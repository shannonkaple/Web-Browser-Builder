<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STEM: Web Browser Drag and Drop Puzzle</title>
  <style>
    :root{
      --bg:#f4f6fb; --card:#fff; --ink:#0b1220; --muted:#6b7280; --accent:#2563eb; --ok:#16a34a; --bad:#dc2626; --shadow:0 10px 28px rgba(0,0,0,.08); --r:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--ink); background:var(--bg); display:grid; place-items:start center; padding:24px}
    .app{width:min(1200px,96vw)}

    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:16px}
    h1{margin:0;font-size:clamp(1.2rem,1.2rem + 1vw,2rem)}
    .sub{color:var(--muted)}
    .status{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .pill{background:var(--card);box-shadow:var(--shadow);border-radius:999px;padding:8px 12px}
    button{border:0;border-radius:999px;padding:10px 16px;background:var(--accent);color:#fff;font-weight:700;box-shadow:var(--shadow);cursor:pointer}
    button:active{transform:translateY(1px)}

    .layout{display:grid;grid-template-columns:1.15fr .85fr;gap:18px}
    @media (max-width: 900px){.layout{grid-template-columns:1fr}}

    /* --- Browser Window --- */
    .window{background:var(--card);box-shadow:var(--shadow);border-radius:12px;border:1px solid #e5e7eb;overflow:hidden}
    .titlebar{
      display:grid; grid-template-columns: 1fr auto; align-items:center;
      background:#eef2f7; border-bottom:1px solid #e5e7eb; padding:6px 10px; position:relative;
    }
    .tabstrip{display:flex; align-items:center; gap:10px; padding:6px 8px}
    .tab{position:relative; background:#ffffff; border:1px solid #e5e7eb; border-bottom-color:#d1d5db; height:32px; padding:0 36px 0 14px; border-radius:10px 10px 0 0; display:flex; align-items:center; box-shadow:0 3px 6px rgba(0,0,0,.04) inset}
    .tablabel{font-size:.9rem; color:#334155}
    .slot.tabx{position:absolute; right:6px; top:50%; transform:translateY(-50%); width:22px; height:22px; border-radius:6px}
    .slot.newtab{width:36px; height:32px; border-radius:10px;}

    .wincontrols{display:flex; gap:8px; align-items:center}
    .winbtn{width:36px; height:28px; border-radius:8px; background:#fff; border:1px solid #e5e7eb; box-shadow:var(--shadow); display:grid; place-items:center}

    .toolbar{display:grid; grid-template-columns:auto auto auto 1fr auto auto auto; gap:8px; align-items:center; background:#f8fafc; border-top:1px solid #e5e7eb; border-bottom:1px solid #e5e7eb; padding:8px}
    .slot{min-width:48px;min-height:40px;border-radius:10px;background:#fff;box-shadow:0 1px 0 #e5e7eb;display:grid;place-items:center;outline:2px solid transparent;transition:200ms;position:relative}
    .slot.hint::after{content:attr(data-label); position:absolute; bottom:-1.15rem; left:50%; transform:translateX(-50%); font-size:.74rem; color:var(--muted)}
    .slot.hover{outline-color:var(--accent); background:#eef4ff}
    .slot.correct{outline-color:var(--ok); background:#ecfdf5}
    .slot.wrong{outline-color:var(--bad); background:#fef2f2}

    .url{grid-column:4/span 1; min-height:40px}

    .bookmarks{display:flex; gap:10px; align-items:center; padding:8px 10px; background:#ffffff; border-bottom:1px solid #e5e7eb}
    .bookmark-slot{width:120px; min-height:40px}
    .bmhint{font-size:.85rem;color:#94a3b8;margin-right:8px}

    .page{padding:18px; background:#fbfbfb; height:420px; overflow:auto}
    .page .fake-article{max-width:720px; margin:0 auto}
    .page h2{margin:0 0 8px 0; font-size:1.25rem}
    .page p{color:#4b5563; line-height:1.5}
    .hero{height:160px; border-radius:12px; background:linear-gradient(135deg,#dbeafe,#e9d5ff); border:1px solid #e5e7eb; display:grid; place-items:center; color:#334155; margin:10px 0}
    .linkrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}
    .linkpill{padding:6px 10px; border:1px solid #e5e7eb; border-radius:999px; background:#fff; font-size:.85rem; color:#2563eb}

    /* --- Piece tray --- */
    .tray{background:var(--card);box-shadow:var(--shadow);border-radius:var(--r);padding:16px}
    .tray h2{margin:0 0 8px 0; font-size:1rem; color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    @media (min-width:1000px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}

    .piece{user-select:none;background:#fff;border-radius:14px;min-height:86px;display:grid;place-items:center;text-align:center;box-shadow:var(--shadow);padding:8px;cursor:grab;outline:2px solid transparent;transition:120ms}
    .piece:active{cursor:grabbing}
    .piece.dragging{opacity:.8; transform:scale(.98)}
    .label{font-size:.85rem;color:var(--muted);margin-top:6px;text-align:center}

    svg{width:36px;height:36px}

    .locked{pointer-events:none}

    .confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}
    .confetti i{position:absolute;width:8px;height:12px;opacity:.9;border-radius:2px;animation:fall linear forwards;transform:translate3d(0,-100%,0)}
    @keyframes fall{to{transform:translate3d(var(--dx),110vh,0) rotate(720deg);opacity:1}}
  </style>
</head>
<body>
  <div class="app" aria-live="polite">
    <header>
      <div>
        <h1>STEM: Web Browser Drag and Drop Puzzle</h1>
        <div class="sub">Drag each icon to the correct spot to build a realistic browser window.</div>
      </div>
      <div class="status">
        <div class="pill" id="progress">0 matched</div>
        <button id="resetBtn" type="button">Reset</button>
      </div>
    </header>

    <section class="layout" role="application" aria-label="Web browser drag-and-drop">
      <!-- Browser mock -->
      <div class="window">
        <!-- Unified bar: Tabs + window controls + new tab + close tab -->
        <div class="titlebar">
          <div class="tabstrip">
            <div class="tab">
              <span class="tablabel">Example Tab</span>
              <div class="slot tabx hint" data-accept="closeTab" data-label="Close Tab" aria-label="Drop Close Tab here"></div>
            </div>
            <div class="slot newtab hint" data-accept="newTab" data-label="New Tab" aria-label="Drop New Tab here"></div>
          </div>
          <div class="wincontrols">
            <div class="slot hint" style="width:36px;height:28px" data-accept="minimize" data-label="Minimize" aria-label="Drop Minimize here"></div>
            <div class="slot hint" style="width:36px;height:28px" data-accept="maximize" data-label="Maximize" aria-label="Drop Maximize here"></div>
            <div class="slot hint" style="width:36px;height:28px" data-accept="closeWindow" data-label="Close" aria-label="Drop Close Window here"></div>
          </div>
        </div>

        <!-- Toolbar: nav + address + actions -->
        <div class="toolbar">
          <div class="slot hint" data-accept="back" data-label="Back" aria-label="Drop Back here"></div>
          <div class="slot hint" data-accept="forward" data-label="Forward" aria-label="Drop Forward here"></div>
          <div class="slot hint" data-accept="reload" data-label="Reload" aria-label="Drop Reload here"></div>
          <div class="slot url hint" data-accept="address" data-label="Address Bar" aria-label="Drop Address Bar here"></div>
          <div class="slot hint" data-accept="downloads" data-label="Downloads" aria-label="Drop Downloads here"></div>
          <div class="slot hint" data-accept="extensions" data-label="Extensions" aria-label="Drop Extensions here"></div>
          <div class="slot hint" data-accept="menu" data-label="Menu" aria-label="Drop Menu here"></div>
        </div>

        <!-- Bookmarks bar -->
        <div class="bookmarks">
          <div class="bmhint">Bookmarks:</div>
          <div class="slot bookmark-slot hint" data-accept="bmApple" data-label="ðŸŽ Apple"></div>
          <div class="slot bookmark-slot hint" data-accept="bmBrain" data-label="ðŸ§  Brain"></div>
          <div class="slot bookmark-slot hint" data-accept="bmRocket" data-label="ðŸš€ Rocket"></div>
          <div class="slot bookmark-slot hint" data-accept="bmMusic" data-label="ðŸŽµ Music"></div>
        </div>

        <!-- Web page content (pretend) -->
        <div class="page">
          <div class="fake-article">
            <h2>Today in STEM: Patterns, Pixels, and the Power of Clicks</h2>
            <div class="hero">Pretend banner image</div>
            <p>
              Welcome to our practice page! Below are links and a short paragraph like you might see on a real website. 
              Use the trackpad to scroll this page. Then build the browser interface by dragging icons to the correct places above.
            </p>
            <div class="linkrow">
              <span class="linkpill">Class Announcements</span>
              <span class="linkpill">STEM Games</span>
              <span class="linkpill">How-To Videos</span>
              <span class="linkpill">Safety & Privacy</span>
            </div>
            <p>
              Tip: The <strong>Address Bar</strong> shows the web address, while the <strong>Back</strong> and <strong>Forward</strong> buttons move you through your history. 
              The <strong>Reload</strong> button refreshes the page. <strong>Downloads</strong> shows files you saved, and <strong>Extensions</strong> are small helper tools.
            </p>
          </div>
        </div>
      </div>

      <!-- Pieces tray -->
      <div class="tray">
        <h2>Drag these</h2>
        <div class="grid" id="pieces"></div>
      </div>
    </section>
  </div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <script>
    // Pieces to match to slots
    const PIECES = [
      // Unified top bar
      {key:'newTab', label:'New Tab', icon:plusIcon},
      {key:'closeTab', label:'Close Tab', icon:closeSmallIcon},
      {key:'minimize', label:'Minimize', icon:minimizeIcon},
      {key:'maximize', label:'Maximize', icon:maximizeIcon},
      {key:'closeWindow', label:'Close Window', icon:closeWindowIcon},

      // Toolbar
      {key:'back', label:'Back', icon:backIcon},
      {key:'forward', label:'Forward', icon:forwardIcon},
      {key:'reload', label:'Reload', icon:reloadIcon},
      {key:'address', label:'Address Bar', icon:addressIcon},
      {key:'downloads', label:'Downloads', icon:downloadIcon},
      {key:'extensions', label:'Extensions', icon:puzzleIcon},
      {key:'menu', label:'Menu', icon:menuIcon},

      // Bookmarks (emoji)
      {key:'bmApple', label:'ðŸŽ Apple', icon:()=>emojiIcon('ðŸŽ')},
      {key:'bmBrain', label:'ðŸ§  Brain', icon:()=>emojiIcon('ðŸ§ ')},
      {key:'bmRocket', label:'ðŸš€ Rocket', icon:()=>emojiIcon('ðŸš€')},
      {key:'bmMusic', label:'ðŸŽµ Music', icon:()=>emojiIcon('ðŸŽµ')},
    ];

    const piecesEl = document.getElementById('pieces');
    const progressEl = document.getElementById('progress');
    const resetBtn = document.getElementById('resetBtn');
    const confettiEl = document.getElementById('confetti');

    function allSlots(){ return Array.from(document.querySelectorAll('.slot[data-accept]')); }

    let matched = 0;

    function shuffle(a){return [...a].sort(()=>Math.random()-.5)}

    function makePiece(item){
      const el = document.createElement('div');
      el.className = 'piece';
      el.setAttribute('draggable','true');
      el.setAttribute('role','img');
      el.setAttribute('aria-label',`${item.label}, draggable`);
      el.dataset.key = item.key;
      el.innerHTML = item.icon() + `<div class="label">${item.label}</div>`;
      el.addEventListener('dragstart', e=>{
        e.dataTransfer.setData('text/plain', item.key);
        el.classList.add('dragging');
        if (e.dataTransfer.setDragImage){
          const ghost = el.cloneNode(true); ghost.style.position='absolute'; ghost.style.top='-9999px'; document.body.appendChild(ghost);
          e.dataTransfer.setDragImage(ghost, ghost.offsetWidth/2, ghost.offsetHeight/2);
          setTimeout(()=>ghost.remove(),0);
        }
      });
      el.addEventListener('dragend', ()=>el.classList.remove('dragging'));
      return el;
    }

    function setupSlots(){
      allSlots().forEach(slot=>{
        slot.addEventListener('dragover', e=>{e.preventDefault(); slot.classList.add('hover')});
        slot.addEventListener('dragleave', ()=>slot.classList.remove('hover'));
        slot.addEventListener('drop', e=>{
          e.preventDefault(); slot.classList.remove('hover');
          if (slot.classList.contains('correct')) return; // filled
          const want = slot.dataset.accept; const got = e.dataTransfer.getData('text/plain');
          if (!got) return;
          if (got === want){
            // move the piece into the slot
            const piece = [...document.querySelectorAll('.piece')].find(p=>p.dataset.key===got && !p.closest('.slot'));
            if (piece){
              piece.classList.add('locked');
              piece.setAttribute('aria-label', piece.getAttribute('aria-label') + ' (matched)');
              slot.classList.add('correct');
              // icon-only clone inside slot
              const iconOnly = piece.firstElementChild.cloneNode(true);
              slot.innerHTML = '';
              slot.appendChild(iconOnly);
              piece.remove();
              matched++; updateProgress();
            }
          } else {
            slot.classList.add('wrong'); setTimeout(()=>slot.classList.remove('wrong'), 350);
          }
        });
      });
    }

    function neededCount(){ return allSlots().length; }

    function updateProgress(){
      const need = neededCount();
      progressEl.textContent = `${matched} / ${need} matched`;
      if (matched >= need){
        launchConfetti();
        progressEl.textContent = `All matched! Great job!`;
      }
    }

    function render(){
      matched = 0; updateProgress();
      piecesEl.innerHTML = '';
      shuffle(PIECES).forEach(item=> piecesEl.appendChild(makePiece(item)));
    }

    function reset(){
      document.querySelectorAll('.slot').forEach(s=>{
        s.classList.remove('correct','wrong','hover');
        s.innerHTML = '';
      });
      render();
    }

    // Simple confetti
    function launchConfetti(){
      const count = 140; const colors = ['#f59e0b','#10b981','#3b82f6','#ef4444','#8b5cf6','#14b8a6'];
      for (let i=0;i<count;i++){
        const p = document.createElement('i');
        p.style.left = Math.random()*100 + 'vw';
        p.style.top = '-10vh';
        p.style.background = colors[Math|Math.random()*colors.length];
        p.style.setProperty('--dx', (Math.random()*220-110)+'px');
        p.style.animationDuration = (Math.random()*1.5+1.2).toFixed(2)+'s';
        confettiEl.appendChild(p); setTimeout(()=>p.remove(), 2300);
      }
    }

    /* --- Icons --- */
    function svg(path){return `<svg viewBox='0 0 24 24' aria-hidden='true'><path d='${path}' fill='currentColor'/></svg>`}
    function emojiIcon(ch){return `<div style="font-size:28px;line-height:1">${ch}</div>`}

    // Window controls
    function minimizeIcon(){return svg('M6 13h12v2H6z')}
    function maximizeIcon(){return `<svg viewBox='0 0 24 24' aria-hidden='true'><rect x='6' y='6' width='12' height='12' rx='2' ry='2' fill='none' stroke='currentColor' stroke-width='2'/></svg>`}
    function closeWindowIcon(){return svg('M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.6 13.4 4.3 19.71 2.89 18.29 9.17 12 2.89 5.71 4.3 4.29 10.6 10.6l6.29-6.3z')}

    // Tabs
    function closeSmallIcon(){return svg('M15.3 8.71 12 12l3.3 3.29-1.41 1.42L10.6 13.4 7.3 16.71 5.89 15.29 9.17 12 5.89 8.71 7.3 7.29l3.29 3.31 3.3-3.31z')}
    function plusIcon(){return svg('M11 11V6h2v5h5v2h-5v5h-2v-5H6v-2z')}

    // Toolbar
    function backIcon(){return svg('M20 11H7.83l3.58-3.59L10 6l-6 6 6 6 1.41-1.41L7.83 13H20v-2z')}
    function forwardIcon(){return svg('M4 13h12.17l-3.58 3.59L14 18l6-6-6-6-1.41 1.41L16.17 11H4v2z')}
    function reloadIcon(){return svg('M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5H5a7 7 0 1 0 7-7z')}
    function addressIcon(){return `<svg viewBox='0 0 24 24' aria-hidden='true'><rect x='3' y='7' width='18' height='10' rx='4' fill='currentColor' opacity='.1'/><rect x='5' y='10' width='14' height='4' rx='2' fill='currentColor'/></svg>`}
    function downloadIcon(){return `<svg viewBox='0 0 24 24' aria-hidden='true'><path d='M5 20h14v-2H5v2z' fill='currentColor'/><path d='M11 4h2v8h3l-4 4-4-4h3z' fill='currentColor'/></svg>`}
    function menuIcon(){return svg('M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z')}
    function puzzleIcon(){return `<svg viewBox='0 0 24 24' aria-hidden='true'><path d='M19 13h-2v-2a2 2 0 0 0-2-2h-2V7a3 3 0 1 0-6 0v2H5a2 2 0 0 0-2 2v2h2a2 2 0 0 1 2 2v2h2a2 2 0 0 0 2-2v-2h2a2 2 0 0 1 2 2v2h2a2 2 0 0 0 2-2v-2z' fill='currentColor'/></svg>`}

    function init(){ render(); setupSlots(); updateProgress(); }
    resetBtn.addEventListener('click', reset);
    init();
  </script>
</body>
</html>
