<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STEM: Web Browser Drag and Drop Puzzle</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --ink:#0f172a; --muted:#6b7280; --accent:#2563eb; --ok:#16a34a; --bad:#dc2626; --shadow:0 8px 24px rgba(0,0,0,.08); --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--ink); background:var(--bg); display:grid; place-items:start center; padding:24px}
    .app{width:min(1200px,96vw)}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:16px}
    h1{margin:0;font-size:clamp(1.2rem,1.2rem + 1vw,2rem)}
    .sub{color:var(--muted)}
    .status{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .pill{background:var(--card);box-shadow:var(--shadow);border-radius:999px;padding:8px 12px}
    button{border:0;border-radius:999px;padding:10px 16px;background:var(--accent);color:#fff;font-weight:700;box-shadow:var(--shadow);cursor:pointer}
    button:active{transform:translateY(1px)}

    .layout{display:grid;grid-template-columns:1.1fr .9fr;gap:18px}
    @media (max-width: 900px){.layout{grid-template-columns:1fr}}

    .browser{background:var(--card);box-shadow:var(--shadow);border-radius:var(--r);padding:16px}
    .bar{background:#f1f5f9;border-radius:12px;padding:10px;display:grid;grid-template-columns:auto auto auto 1fr auto auto auto;gap:8px;align-items:center}
    .slot{min-width:54px;min-height:54px;border-radius:12px;background:#fff;box-shadow:var(--shadow);display:grid;place-items:center;outline:2px solid transparent;transition:200ms;position:relative}
    .slot.hint::after{content:attr(data-label); position:absolute; bottom:-1.2rem; left:50%; transform:translateX(-50%); font-size:.75rem; color:var(--muted)}
    .slot.hover{outline-color:var(--accent); background:#eef4ff}
    .slot.correct{outline-color:var(--ok); background:#ecfdf5}
    .slot.wrong{outline-color:var(--bad); background:#fef2f2}
    .url{grid-column:4/span 1; min-height:54px}
    .tabs{margin-top:14px; display:flex; gap:10px; align-items:center}

    .page{margin-top:16px; border-radius:14px; background:#fafafa; border:1px dashed #e5e7eb; height:360px; display:grid; place-items:center; color:#94a3b8}

    .tray{background:var(--card);box-shadow:var(--shadow);border-radius:var(--r);padding:16px}
    .tray h2{margin:0 0 8px 0; font-size:1rem; color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    @media (min-width:1000px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}

    .piece{user-select:none;background:#fff;border-radius:14px;min-height:86px;display:grid;place-items:center;text-align:center;box-shadow:var(--shadow);padding:8px;cursor:grab;outline:2px solid transparent;transition:120ms}
    .piece:active{cursor:grabbing}
    .piece.dragging{opacity:.8; transform:scale(.98)}
    .label{font-size:.85rem;color:var(--muted);margin-top:6px}

    svg{width:40px;height:40px}

    .locked{pointer-events:none}

    .confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden}
    .confetti i{position:absolute;width:8px;height:12px;opacity:.9;border-radius:2px;animation:fall linear forwards;transform:translate3d(0,-100%,0)}
    @keyframes fall{to{transform:translate3d(var(--dx),110vh,0) rotate(720deg);opacity:1}}
  </style>
</head>
<body>
  <div class="app" aria-live="polite">
    <header>
      <div>
        <h1>STEM: Web Browser Drag and Drop Puzzle</h1>
        <div class="sub">Drag each icon to the correct place in the browser. There are 10 matches.</div>
      </div>
      <div class="status">
        <div class="pill" id="progress">0 / 10 matched</div>
        <button id="resetBtn" type="button">Reset</button>
      </div>
    </header>

    <section class="layout" role="application" aria-label="Web browser drag-and-drop">
      <!-- Browser mock -->
      <div class="browser">
        <div class="bar">
          <div class="slot hint" data-accept="back" data-label="Back" aria-label="Drop Back here"></div>
          <div class="slot hint" data-accept="forward" data-label="Forward" aria-label="Drop Forward here"></div>
          <div class="slot hint" data-accept="reload" data-label="Reload" aria-label="Drop Reload here"></div>
          <div class="slot url hint" data-accept="address" data-label="Address Bar" aria-label="Drop Address Bar here"></div>
          <div class="slot hint" data-accept="bookmark" data-label="Bookmark" aria-label="Drop Bookmark here"></div>
          <div class="slot hint" data-accept="downloads" data-label="Downloads" aria-label="Drop Downloads here"></div>
          <div class="slot hint" data-accept="menu" data-label="Menu" aria-label="Drop Menu here"></div>
        </div>
        <div class="tabs">
          <div class="slot hint" data-accept="newtab" data-label="New Tab" aria-label="Drop New Tab here"></div>
          <div class="slot hint" data-accept="tab" data-label="Tab" aria-label="Drop Tab here"></div>
          <div class="slot hint" data-accept="close" data-label="Close Tab" aria-label="Drop Close Tab here"></div>
          <div class="slot hint" data-accept="extensions" data-label="Extensions" aria-label="Drop Extensions here" style="margin-left:auto"></div>
        </div>
        <div class="page">Web page area</div>
      </div>

      <!-- Pieces tray -->
      <div class="tray">
        <h2>Drag these</h2>
        <div class="grid" id="pieces"></div>
      </div>
    </section>
  </div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <script>
    // 10 draggable items and where they belong
    const PIECES = [
      {key:'back', label:'Back', svg:backIcon},
      {key:'forward', label:'Forward', svg:forwardIcon},
      {key:'reload', label:'Reload', svg:reloadIcon},
      {key:'address', label:'Address Bar', svg:addressIcon},
      {key:'bookmark', label:'Bookmark', svg:starIcon},
      {key:'downloads', label:'Downloads', svg:downloadIcon},
      {key:'menu', label:'Menu', svg:menuIcon},
      {key:'newtab', label:'New Tab', svg:plusIcon},
      {key:'tab', label:'Tab', svg:tabIcon},
      {key:'close', label:'Close Tab', svg:closeIcon},
      // bonus (11th) left out to keep to 10: {key:'extensions', label:'Extensions', svg:puzzleIcon},
    ];

    // Add an 11th target (extensions) for realism, but it won't be required if we keep 10 pieces.
    // Uncomment below to include extensions as an 11th piece instead of Tab (or adjust as needed).

    const targetsNeedingPieces = new Set(['back','forward','reload','address','bookmark','downloads','menu','newtab','tab','close','extensions']);

    const piecesEl = document.getElementById('pieces');
    const progressEl = document.getElementById('progress');
    const resetBtn = document.getElementById('resetBtn');
    const confettiEl = document.getElementById('confetti');

    let matched = 0;

    function shuffle(a){return [...a].sort(()=>Math.random()-.5)}

    function makePiece(item){
      const el = document.createElement('div');
      el.className = 'piece';
      el.setAttribute('draggable','true');
      el.setAttribute('role','img');
      el.setAttribute('aria-label',`${item.label}, draggable`);
      el.dataset.key = item.key;
      el.innerHTML = item.svg() + `<div class="label">${item.label}</div>`;
      el.addEventListener('dragstart', e=>{
        e.dataTransfer.setData('text/plain', item.key);
        el.classList.add('dragging');
        if (e.dataTransfer.setDragImage){
          const ghost = el.cloneNode(true); ghost.style.position='absolute'; ghost.style.top='-9999px'; document.body.appendChild(ghost);
          e.dataTransfer.setDragImage(ghost, ghost.offsetWidth/2, ghost.offsetHeight/2);
          setTimeout(()=>ghost.remove(),0);
        }
      });
      el.addEventListener('dragend', ()=>el.classList.remove('dragging'));
      return el;
    }

    function setupSlots(){
      document.querySelectorAll('.slot').forEach(slot=>{
        slot.addEventListener('dragover', e=>{e.preventDefault(); slot.classList.add('hover')});
        slot.addEventListener('dragleave', ()=>slot.classList.remove('hover'));
        slot.addEventListener('drop', e=>{
          e.preventDefault(); slot.classList.remove('hover');
          const want = slot.dataset.accept; const got = e.dataTransfer.getData('text/plain');
          if (!got) return;
          if (got === want){
            // move the piece into the slot
            const piece = [...document.querySelectorAll('.piece')].find(p=>p.dataset.key===got && !p.closest('.slot'));
            if (piece){
              piece.classList.add('locked');
              piece.setAttribute('aria-label', piece.getAttribute('aria-label') + ' (matched)');
              slot.classList.add('correct');
              // keep only the icon in the slot (hide text label for tidy look)
              const iconOnly = piece.firstElementChild.cloneNode(true);
              slot.innerHTML = '';
              slot.appendChild(iconOnly);
              piece.remove();
              matched++; updateProgress();
            }
          } else {
            slot.classList.add('wrong'); setTimeout(()=>slot.classList.remove('wrong'), 350);
          }
        });
      });
    }

    function updateProgress(){
      const needed = 10; // required matches
      progressEl.textContent = `${Math.min(matched,needed)} / ${needed} matched`;
      if (matched >= needed){
        launchConfetti();
        progressEl.textContent = `All matched! Great job!`;
      }
    }

    function render(){
      matched = 0; updateProgress();
      piecesEl.innerHTML = '';
      shuffle(PIECES).forEach(item=> piecesEl.appendChild(makePiece(item)));
    }

    function reset(){
      // Clear icons inside slots (keep hints)
      document.querySelectorAll('.slot').forEach(s=>{
        s.classList.remove('correct','wrong','hover');
        s.innerHTML = '';
      });
      render();
    }

    // Simple confetti
    function launchConfetti(){
      const count = 120; const colors = ['#f59e0b','#10b981','#3b82f6','#ef4444','#8b5cf6','#14b8a6'];
      for (let i=0;i<count;i++){
        const p = document.createElement('i');
        p.style.left = Math.random()*100 + 'vw';
        p.style.top = '-10vh';
        p.style.background = colors[Math|Math.random()*colors.length];
        p.style.setProperty('--dx', (Math.random()*200-100)+'px');
        p.style.animationDuration = (Math.random()*1.5+1.2).toFixed(2)+'s';
        confettiEl.appendChild(p); setTimeout(()=>p.remove(), 2200);
      }
    }

    // --- Inline SVG icon factories (simple, kid-friendly) ---
    function svgWrap(d){return `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="${d}" fill="currentColor"/></svg>`}
    function backIcon(){return svgWrap('M20 11H7.83l3.58-3.59L10 6l-6 6 6 6 1.41-1.41L7.83 13H20v-2z')}
    function forwardIcon(){return svgWrap('M4 13h12.17l-3.58 3.59L14 18l6-6-6-6-1.41 1.41L16.17 11H4v2z')}
    function reloadIcon(){return svgWrap('M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5H5a7 7 0 1 0 7-7z')}
    function addressIcon(){return `<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="7" width="18" height="10" rx="4" fill="currentColor" opacity=".1"/><rect x="5" y="10" width="14" height="4" rx="2" fill="currentColor"/></svg>`}
    function starIcon(){return svgWrap('M12 17.27 18.18 21 16.54 13.97 22 9.24 14.81 8.63 12 2 9.19 8.63 2 9.24 7.46 13.97 5.82 21z')}
    function downloadIcon(){return `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 20h14v-2H5v2z" fill="currentColor"/><path d="M11 4h2v8h3l-4 4-4-4h3z" fill="currentColor"/></svg>`}
    function menuIcon(){return svgWrap('M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z')}
    function plusIcon(){return svgWrap('M11 11V6h2v5h5v2h-5v5h-2v-5H6v-2z')}
    function tabIcon(){return `<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="3" y="6" width="18" height="12" rx="3" fill="currentColor" opacity=".15"/><path d="M3 10h8V6H6a3 3 0 0 0-3 3v1z" fill="currentColor"/></svg>`}
    function closeIcon(){return svgWrap('M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.6 13.4 4.3 19.71 2.89 18.29 9.17 12 2.89 5.71 4.3 4.29 10.6 10.6l6.29-6.3z')}
    function puzzleIcon(){return `<svg viewBox='0 0 24 24' aria-hidden='true'><path d='M19 13h-2v-2a2 2 0 0 0-2-2h-2V7a3 3 0 1 0-6 0v2H5a2 2 0 0 0-2 2v2h2a2 2 0 0 1 2 2v2h2a2 2 0 0 0 2-2v-2h2a2 2 0 0 1 2 2v2h2a2 2 0 0 0 2-2v-2z' fill='currentColor'/></svg>`}

    // Init
    function init(){
      render(); setupSlots(); updateProgress();
    }

    resetBtn.addEventListener('click', reset);
    init();
  </script>
</body>
</html>
